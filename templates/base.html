<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Guardias IT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- FAVICON -->
   <link rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='img/favicon_v3.ico') }}">


    <!-- Bootstrap -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <!-- Font Awesome -->
    <link
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        rel="stylesheet"
    >

    <style>
        /* ======================
           VARIABLES DE TEMA
        ====================== */
        :root {
            --bg-body: #f97316;
            --bg-card: #ffffff;
            --text-main: #111;
            --navbar-bg: #ffffff;
            --border-accent: #f97316;
        }

        body.dark-mode {
            --bg-body: #121212;
            --bg-card: #1e1e1e;
            --text-main: #f1f1f1;
            --navbar-bg: #1c1c1c;
            --border-accent: #f97316;
        }

        /* ======================
           ESTILOS GENERALES
        ====================== */
        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            transition: all 0.3s ease;
        }

        .main-container {
            background-color: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,.15);
        }

        /* ======================
           NAVBAR
        ====================== */
        .navbar-custom {
            background-color: var(--navbar-bg);
            border-bottom: 3px solid var(--border-accent);
        }

        .navbar-custom .navbar-brand,
        .navbar-custom a {
            color: var(--text-main) !important;
        }

        .navbar-custom .btn {
            border-color: var(--border-accent);
            color: var(--border-accent);
        }

        .navbar-custom .btn:hover {
            background-color: var(--border-accent);
            color: #fff;
        }

        .logo {
            height: 36px;
            width: auto;
        }
    </style>
</head>

<body>

<nav class="navbar navbar-custom mb-4">
    <div class="container d-flex justify-content-between align-items-center">

        <!-- LOGO + NAVEGACI√ìN -->
        <div class="d-flex align-items-center gap-3">

            <!-- LOGO EMPRESA -->
            <a href="/" class="navbar-brand d-flex align-items-center gap-2">
                <img
                    src="{{ url_for('static', filename='img/logo.png') }}"
                    alt="Logo empresa"
                    class="logo"
                >
                <span class="fw-bold">Guardias IT</span>
            </a>

            <a href="/" class="btn btn-sm">Inicio</a>
            <a href="/nueva" class="btn btn-sm">Nuevo llamado</a>

            {% if current_user.is_authenticated and current_user.es_admin %}
                <a href="/dashboard" class="btn btn-sm">üìä Dashboard</a>
                <a href="/usuarios" class="btn btn-sm">Panel Usuarios</a>
            {% endif %}
        </div>

        <!-- USUARIO + TEMA -->
        <div class="d-flex align-items-center gap-2">
            <button id="toggleTheme" class="btn btn-sm">
                üåô
            </button>

            {% if current_user.is_authenticated %}
                <span class="fw-semibold">
                    üë§ {{ current_user.username }}
                </span>
                <a href="/logout" class="btn btn-sm btn-danger text-white">
                    Salir
                </a>
            {% endif %}
        </div>

    </div>
</nav>

<div class="container">
    <div class="main-container">
        {% block content %}{% endblock %}
    </div>
</div>

<!-- ======================
     SCRIPT MODO OSCURO
====================== -->
<script>
    const toggleBtn = document.getElementById("toggleTheme");
    const body = document.body;

    // cargar preferencia
    if (localStorage.getItem("theme") === "dark") {
        body.classList.add("dark-mode");
        toggleBtn.textContent = "‚òÄÔ∏è";
    }

    toggleBtn.addEventListener("click", () => {
        body.classList.toggle("dark-mode");

        const dark = body.classList.contains("dark-mode");
        localStorage.setItem("theme", dark ? "dark" : "light");
        toggleBtn.textContent = dark ? "‚òÄÔ∏è" : "üåô";
    });
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
